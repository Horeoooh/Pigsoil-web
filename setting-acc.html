    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Account Settings - PigSoil+</title>
        <link rel="stylesheet" href="/css/styles.css">
        <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
        
        <!-- i18next for internationalization -->
        <script src="https://cdn.jsdelivr.net/npm/i18next@23.7.6/i18next.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/i18next-http-backend@2.4.2/i18nextHttpBackend.min.js"></script>
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            body {
                font-family: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
                background: linear-gradient(135deg, #fde2e4 0%, #fad0c4 100%);
                min-height: 100vh;
            }

            /* Header */
            .header {
                background: white;
                padding: 12px 24px;
                display: flex;
                justify-content: space-between;
                align-items: center;
                box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            }

            .nav-container {
                display: flex;
                justify-content: space-between;
                align-items: center;
                width: 100%;
                max-width: 1400px;
                margin: 0 auto;
            }

            .logo {
                display: flex;
                align-items: center;
                gap: 8px;
                font-size: 20px;
                font-weight: 600;
                color: #2d5a27;
            }

            .logo-img {
                height: 50px;
                width: auto;
            }

            .logo-text {
                height: 40px;
                width: 171px;
                object-fit: contain;
            }

            .nav-menu {
                display: flex;
                gap: 32px;
                list-style: none;
                margin: 0;
                padding: 0;
            }

            .nav-menu a {
                text-decoration: none;
                color: #666;
                font-weight: 500;
                padding: 8px 0;
                border-bottom: 2px solid transparent;
                transition: all 0.3s ease;
            }

            .nav-menu a.active {
                color: #4CAF50;
                border-bottom-color: #4CAF50;
            }

            .nav-menu a:hover {
                color: #4CAF50;
            }

            .user-section {
                display: flex;
                align-items: center;
                gap: 12px;
            }

            .icon-btn {
                background: none;
                border: none;
                cursor: pointer;
                padding: 8px;
                color: #666;
                transition: all 0.3s;
                border-radius: 6px;
            }

            .icon-btn:hover {
                color: #4CAF50;
                background: rgba(76, 175, 80, 0.1);
            }

            .user-profile {
                display: flex;
                align-items: center;
                gap: 12px;
                text-decoration: none;
                color: #333;
                padding: 8px;
                border-radius: 8px;
                transition: background-color 0.3s;
            }

            .user-profile:hover {
                background: rgba(76, 175, 80, 0.1);
            }

            .user-avatar {
                width: 36px;
                height: 36px;
                background: #4CAF50;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                color: white;
                font-weight: 600;
                font-size: 14px;
            }

            .user-name {
                font-weight: 600;
                color: #333;
                font-size: 14px;
            }

            .user-role {
                font-size: 12px;
                color: #666;
            }

            /* Main Content */
            .main-container {
                max-width: 1200px;
                margin: 40px auto;
                padding: 0 24px;
            }

            .settings-container {
                background: white;
                border-radius: 12px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.1);
                overflow: hidden;
                display: flex;
                min-height: 500px;
            }

            /* Sidebar */
            .sidebar {
                background: #F0F0F0;
                width: 250px;
                padding: 24px 0;
                display: flex;
                flex-direction: column;
            }

            .sidebar-item {
                padding: 12px 24px;
                cursor: pointer;
                color: #666;
                font-weight: 500;
                transition: all 0.3s ease;
                border-right: 3px solid transparent;
                background: none;
                border: none;
                text-align: left;
                width: 100%;
                text-decoration: none;
                display: block;
                font-family: 'Poppins', sans-serif;
                font-size: 14px;
                line-height: normal;
            }

            .sidebar-item:hover {
                background: #e9ecef;
                color: #333;
                text-decoration: none;
            }

            .sidebar-item.active {
                background: #e8f5e8;
                color: #2d5a27;
                border-right-color: #4CAF50;
            }
            
            /* Ensure links look exactly like buttons */
            a.sidebar-item {
                color: #666;
            }
            
            a.sidebar-item:hover {
                color: #333;
                text-decoration: none;
            }
            
            a.sidebar-item:visited {
                color: #666;
            }

            .sidebar-section {
                margin-top: 24px;
                padding-top: 16px;
            }

            .sidebar-section-title {
                padding: 0 24px 12px;
                font-size: 12px;
                color: #999;
                text-transform: uppercase;
                font-weight: 600;
            }

            .logout-btn {
                margin-top: 32px;
                padding: 12px 24px;
                color: #dc3545;
                cursor: pointer;
                font-weight: 600;
                display: flex;
                align-items: center;
                gap: 8px;
                text-decoration: none;
                background: none;
                border: none;
                width: 100%;
                text-align: left;
            }

            .logout-btn:hover {
                background: #f8f9fa;
            }

            .support-btn {
                margin-top: 24px;
                padding: 12px 24px;
                color: #888888;
                cursor: pointer;
                font-weight: 500;
                display: flex;
                align-items: center;
                gap: 8px;
                text-decoration: none;
                background: none;
                border: none;
                width: 100%;
                text-align: left;
                font-size: 14px;
                transition: all 0.3s ease;
            }

            .support-btn:hover {
                color: #666;
                background: #f8f9fa;
            }

            /* Content Area */
            .content {
                flex: 1;
                padding: 32px;
            }

            .profile-header {
                display: flex;
                align-items: center;
                gap: 16px;
                margin-bottom: 32px;
            }

            .profile-avatar-container {
                position: relative;
                display: inline-block;
            }

            .profile-avatar {
                width: 80px;
                height: 80px;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                border-radius: 12px;
                display: flex;
                align-items: center;
                justify-content: center;
                color: white;
                font-size: 24px;
                font-weight: 600;
                background-size: cover;
                background-position: center;
            }

            .avatar-upload-btn {
                position: absolute;
                bottom: -4px;
                right: -4px;
                width: 32px;
                height: 32px;
                background: #4CAF50;
                border: 3px solid white;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                cursor: pointer;
                transition: all 0.3s ease;
                color: white;
                padding: 0;
            }

            .avatar-upload-btn:hover {
                background: #45a049;
                transform: scale(1.1);
            }

            .avatar-upload-btn svg {
                width: 16px;
                height: 16px;
            }

            .form-group {
                margin-bottom: 24px;
            }

            .form-label {
                display: block;
                margin-bottom: 8px;
                font-weight: 600;
                color: #333;
            }

            .form-input {
                width: 100%;
                max-width: 400px;
                padding: 12px 16px;
                border: 2px solid #e9ecef;
                border-radius: 8px;
                font-size: 14px;
                transition: border-color 0.3s ease;
                font-family: 'Poppins', sans-serif;
            }

            .form-input:focus {
                outline: none;
                border-color: #4CAF50;
                box-shadow: 0 0 0 2px rgba(76, 175, 80, 0.1);
            }

            .form-input[type="password"] {
                font-family: monospace;
            }

            /* Account Removal Section */
            .account-removal {
                margin-top: 48px;
                padding-top: 24px;
                border-top: 1px solid #e9ecef;
            }

            .account-removal h3 {
                color: #dc3545;
                margin-bottom: 8px;
            }

            .account-removal p {
                color: #666;
                margin-bottom: 16px;
                font-size: 14px;
            }

            .button-group {
                display: flex;
                gap: 12px;
            }

            .btn {
                padding: 10px 20px;
                border: none;
                border-radius: 6px;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.3s ease;
                font-size: 14px;
                font-family: 'Poppins', sans-serif;
            }

            .btn-success {
                background: #4CAF50;
                color: white;
            }

            .btn-success:hover {
                background: #45a049;
            }

            .btn-danger {
                background: #dc3545;
                color: white;
            }

            .btn-danger:hover {
                background: #c82333;
            }

            .btn-outline {
                background: transparent;
                color: #dc3545;
                border: 1px solid #dc3545;
            }

            .btn-outline:hover {
                background: #dc3545;
                color: white;
            }

            .btn-link {
                background: none;
                border: none;
                padding: 0;
                cursor: pointer;
                font-family: 'Poppins', sans-serif;
                text-decoration: underline;
            }

            .btn-link:hover {
                opacity: 0.8;
            }

            /* Loading state */
            .loading {
                display: inline-block;
                width: 16px;
                height: 16px;
                border: 2px solid #f3f3f3;
                border-top: 2px solid #4CAF50;
                border-radius: 50%;
                animation: spin 1s linear infinite;
                margin-right: 8px;
            }

            @keyframes spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }

            /* Success/Error messages */
            .alert {
                padding: 12px 16px;
                border-radius: 8px;
                margin-bottom: 16px;
                font-size: 14px;
                font-weight: 500;
                display: none;
            }

            .alert.success {
                background: #d4edda;
                color: #155724;
                border: 1px solid #c3e6cb;
            }

            .alert.error {
                background: #f8d7da;
                color: #721c24;
                border: 1px solid #f5c6cb;
            }

            /* Screen reader only class */
            .sr-only {
                position: absolute;
                width: 1px;
                height: 1px;
                padding: 0;
                margin: -1px;
                overflow: hidden;
                clip: rect(0, 0, 0, 0);
                white-space: nowrap;
                border: 0;
            }

            /* Responsive Design */
            @media (max-width: 768px) {
                .nav-menu {
                    display: none;
                }

                .settings-container {
                    flex-direction: column;
                }

                .sidebar {
                    width: 100%;
                    padding: 16px 0;
                }

                .sidebar-item {
                    padding: 8px 16px;
                }
            }
        </style>
    </head>
    <body>
        <header class="header">
            <nav class="nav-container">
                <div class="logo">
                    <img src="/images/pig logo.png" alt="PigSoil Logo" class="logo-img">
                    <img src="/images/pigsoil.png" alt="PigSoil+" class="logo-text">
                </div>
                
              <ul class="nav-menu">
    <li><a href="/dashboard.html" data-nav="dashboard" data-i18n="settings.nav.dashboard">Dashboard</a></li>
    <li style="display: none;"><a href="/transactions.html" data-nav="transactions" data-i18n="settings.nav.transactions">Transactions</a></li>
    <li><a href="/farmermarket.html" data-nav="market" data-i18n="settings.nav.market">Market</a></li>
    <li><a href="/guides.html" data-nav="guides" data-i18n="settings.nav.guides">Guides</a></li>
</ul>
                
                <div class="user-section">
                   <a href ="/notifications.html">
                    <button class="icon-btn" id="notificationBtn" aria-label="View notifications">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                        <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                    </svg>
                    </button>
                    </a>
                    <a href="/setting-acc.html" class="user-profile" title="User Profile" aria-label="View user profile settings">
                        <div>
                            <span class="user-name" id="headerUserName">Loading...</span>
                        </div>
                        <div class="user-avatar" id="headerUserAvatar">
                            <img src="https://i.pinimg.com/736x/d7/95/c3/d795c373a0539e64c7ee69bb0af3c5c3.jpg" alt="User" style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%;">
                        </div>
                    </a>
                </div>
            </nav>
        </header>

        <main class="main-container">
            <div class="settings-container">
                <aside class="sidebar">
                    <div class="sidebar-section">
                        <div class="sidebar-section-title">SETTINGS</div>
                        <button class="sidebar-item active" title="Account Settings" aria-label="Manage account settings" data-i18n="settings.sidebar.accountSettings">Account</button>
                        <a href="/setting-language.html" class="sidebar-item" title="Language Settings" aria-label="Manage language settings" data-i18n="settings.sidebar.language">Language</a>
                        <a href="/setting-subscription.html" class="sidebar-item" title="Subscription Settings" aria-label="Manage subscription settings" data-i18n="settings.sidebar.subscription">Subscription</a>
                    </div>

                    <button class="logout-btn" id="logoutBtn" title="Log Out" aria-label="Log out of your account" data-i18n="settings.sidebar.logout">
                        üö™ Log Out
                    </button>

                    <a href="/support.html" class="support-btn" title="Help & Support" aria-label="Get help and support" data-i18n="settings.sidebar.support">
                        Help & Support
                    </a>
                </aside>

                <div class="content">
                    <div class="profile-header">
                        <div class="profile-avatar-container">
                            <div class="profile-avatar" id="profileAvatar" aria-label="Profile Avatar">?</div>
                            <button class="avatar-upload-btn" id="avatarUploadBtn" title="Change profile picture">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"></path>
                                    <circle cx="12" cy="13" r="4"></circle>
                                </svg>
                            </button>
                            <input type="file" id="profilePictureInput" accept="image/*" style="display: none;">
                        </div>
                        <div>
                            <h2 id="profileUserName">Loading...</h2>
                        </div>
                    </div>

                    <div id="alertMessage" class="alert"></div>

                    <form id="profileForm">
                        <div class="form-group">
                            <label for="username" class="form-label" data-i18n="settings.profile.username.label">Username</label>
                            <input type="text" id="username" class="form-input" data-i18n="[placeholder]settings.profile.username.placeholder"
                                title="Username" aria-label="Username">
                        </div>

                        <div class="form-group">
                            <label for="email" class="form-label" data-i18n="settings.profile.email.label">Email</label>
                            <input type="email" id="email" class="form-input" placeholder="Enter your email"
                                title="Email Address" aria-label="Email address">
                            <button type="button" class="btn-link" id="changeEmailBtn" style="display: none; margin-top: 8px; color: #4CAF50; font-size: 13px;" data-i18n="settings.profile.email.changeButton">
                                Change Email
                            </button>
                        </div>

                        <div class="form-group" id="passwordSection" style="display: none;">
                            <label for="password" class="form-label" data-i18n="settings.profile.password.label">Password</label>
                            <button type="button" class="btn-link" id="changePasswordBtn" style="color: #4CAF50; font-size: 13px;" data-i18n="settings.profile.password.changeButton">
                                Change Password
                            </button>
                        </div>

                        <div class="form-group">
                            <label for="phone" class="form-label" data-i18n="settings.profile.phone.label">Phone Number</label>
                            <input type="tel" id="phone" class="form-input" placeholder="Enter phone number"
                                title="Phone Number" aria-label="Phone number" readonly>
                            <button type="button" class="btn-link" id="changePhoneBtn" style="margin-top: 8px; color: #4CAF50; font-size: 13px;" data-i18n="settings.profile.phone.changeButton">
                                Change Phone Number
                            </button>
                        </div>

                        <div class="form-group">
                            <label for="userType" class="form-label" data-i18n="settings.profile.userType.label">User Type</label>
                            <select id="userType" class="form-input" title="User Type" aria-label="User type">
                                <option value="swine_farmer" data-i18n="settings.profile.userType.farmer">Swine Farmer</option>
                                <option value="fertilizer_buyer" data-i18n="settings.profile.userType.buyer">Fertilizer Buyer</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="address" class="form-label" data-i18n="settings.profile.address.label">Address</label>
                            <input type="text" id="address" class="form-input" placeholder="No address set"
                                title="Address" aria-label="Address" readonly>
                            <button type="button" class="btn-link" id="changeAddressBtn" style="margin-top: 8px; color: #4CAF50; font-size: 13px;" data-i18n="settings.profile.address.changeButton">
                                Change Address
                            </button>
                        </div>

                        <div class="button-group">
                            <button type="submit" class="btn btn-success" id="saveBtn" 
                                    title="Save Changes" aria-label="Save account changes" data-i18n="settings.profile.buttons.saveChanges">
                                Save Changes
                            </button>
                        </div>
                    </form>

                    <div class="account-removal">
                        <h3 data-i18n="settings.profile.accountRemoval.title">Delete Account</h3>
                        <p data-i18n="settings.profile.accountRemoval.description">Permanently delete your account and all associated data. This action cannot be undone.</p>
                        <div class="button-group">
                            <button class="btn btn-outline" id="deleteBtn" title="Delete Account" aria-label="Permanently delete your account" data-i18n="settings.profile.accountRemoval.button">Delete Account</button>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Phone Change Modal -->
        <div id="phoneChangeModal" class="modal-overlay">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 data-i18n="settings.modals.phoneChange.title">Change Phone Number</h3>
                    <button class="modal-close" id="phoneModalClose">&times;</button>
                </div>
                <div class="modal-body">
                    <p style="margin-bottom: 16px;">Enter your new phone number. You'll receive an SMS verification code.</p>
                    <input type="tel" id="newPhoneNumber" class="form-input" data-i18n="[placeholder]settings.modals.phoneChange.newPhonePlaceholder" style="width: 100%;">
                    <div id="phoneChangeAlert" class="alert" style="margin-top: 12px; display: none;"></div>
                    <div id="recaptcha-container-phone" style="margin-top: 12px;"></div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-outline" id="cancelPhoneChange" data-i18n="settings.modals.phoneChange.cancelButton">Cancel</button>
                    <button class="btn btn-success" id="sendPhoneCode" data-i18n="settings.modals.phoneChange.sendCodeButton">Send Code</button>
                </div>
            </div>
        </div>

        <!-- SMS Verification Modal -->
        <div id="smsVerificationModal" class="modal-overlay">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 data-i18n="settings.modals.smsVerification.title">Verify Phone Number</h3>
                    <button class="modal-close" id="smsModalClose">&times;</button>
                </div>
                <div class="modal-body">
                    <p style="margin-bottom: 16px;"><span data-i18n="settings.modals.smsVerification.sentTo">Sent to</span> <strong id="verifyPhoneDisplay"></strong></p>
                    <div class="code-inputs" style="display: flex; gap: 8px; justify-content: center; margin: 20px 0;">
                        <input type="text" maxlength="1" class="code-input" pattern="[0-9]" style="width: 45px; height: 50px; text-align: center; font-size: 20px; border: 2px solid #ddd; border-radius: 8px;">
                        <input type="text" maxlength="1" class="code-input" pattern="[0-9]" style="width: 45px; height: 50px; text-align: center; font-size: 20px; border: 2px solid #ddd; border-radius: 8px;">
                        <input type="text" maxlength="1" class="code-input" pattern="[0-9]" style="width: 45px; height: 50px; text-align: center; font-size: 20px; border: 2px solid #ddd; border-radius: 8px;">
                        <input type="text" maxlength="1" class="code-input" pattern="[0-9]" style="width: 45px; height: 50px; text-align: center; font-size: 20px; border: 2px solid #ddd; border-radius: 8px;">
                        <input type="text" maxlength="1" class="code-input" pattern="[0-9]" style="width: 45px; height: 50px; text-align: center; font-size: 20px; border: 2px solid #ddd; border-radius: 8px;">
                        <input type="text" maxlength="1" class="code-input" pattern="[0-9]" style="width: 45px; height: 50px; text-align: center; font-size: 20px; border: 2px solid #ddd; border-radius: 8px;">
                    </div>
                    <div id="smsVerificationAlert" class="alert" style="margin-top: 12px; display: none;"></div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-outline" id="cancelSmsVerification" data-i18n="settings.modals.smsVerification.cancelButton">Cancel</button>
                    <button class="btn btn-success" id="verifySmsCode" data-i18n="settings.modals.smsVerification.verifyButton">Verify</button>
                </div>
            </div>
        </div>

        <!-- Password Change Modal -->
        <div id="passwordChangeModal" class="modal-overlay">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 data-i18n="settings.modals.passwordChange.title">Change Password</h3>
                    <button class="modal-close" id="passwordModalClose">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="form-group" style="margin-bottom: 16px;">
                        <label class="form-label" data-i18n="settings.modals.passwordChange.currentPasswordLabel">Current Password</label>
                        <input type="password" id="currentPassword" class="form-input" data-i18n="[placeholder]settings.modals.passwordChange.currentPasswordPlaceholder">
                    </div>
                    <div class="form-group" style="margin-bottom: 16px;">
                        <label class="form-label" data-i18n="settings.modals.passwordChange.newPasswordLabel">New Password</label>
                        <input type="password" id="newPassword" class="form-input" data-i18n="[placeholder]settings.modals.passwordChange.newPasswordPlaceholder">
                    </div>
                    <div class="form-group" style="margin-bottom: 16px;">
                        <label class="form-label" data-i18n="settings.modals.passwordChange.confirmPasswordLabel">Confirm New Password</label>
                        <input type="password" id="confirmPassword" class="form-input" data-i18n="[placeholder]settings.modals.passwordChange.confirmPasswordPlaceholder">
                    </div>
                    <div id="passwordChangeAlert" class="alert" style="margin-top: 12px; display: none;"></div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-outline" id="cancelPasswordChange" data-i18n="settings.modals.passwordChange.cancelButton">Cancel</button>
                    <button class="btn btn-success" id="saveNewPassword" data-i18n="settings.modals.passwordChange.changeButton">Change Password</button>
                </div>
            </div>
        </div>

        <!-- Add Email & Password Modal (for phone-only users) -->
        <div id="addEmailModal" class="modal-overlay">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 data-i18n="settings.modals.addEmail.title">Add Email & Password</h3>
                    <button class="modal-close" id="addEmailModalClose">&times;</button>
                </div>
                <div class="modal-body">
                    <p style="margin-bottom: 16px; color: #666; font-size: 14px;" data-i18n="settings.modals.addEmail.subtitle">
                        Link an email and password to your account. You'll be able to sign in with either phone or email.
                    </p>
                    <div class="form-group" style="margin-bottom: 16px;">
                        <label class="form-label" data-i18n="settings.modals.addEmail.emailLabel">Email Address</label>
                        <input type="email" id="addEmail" class="form-input" data-i18n="[placeholder]settings.modals.addEmail.emailPlaceholder" style="width: 100%;">
                    </div>
                    <div class="form-group" style="margin-bottom: 16px;">
                        <label class="form-label" data-i18n="settings.modals.addEmail.passwordLabel">Password</label>
                        <input type="password" id="addPassword" class="form-input" data-i18n="[placeholder]settings.modals.addEmail.passwordPlaceholder" style="width: 100%;">
                    </div>
                    <div class="form-group" style="margin-bottom: 16px;">
                        <label class="form-label" data-i18n="settings.modals.addEmail.confirmPasswordLabel">Confirm Password</label>
                        <input type="password" id="addConfirmPassword" class="form-input" data-i18n="[placeholder]settings.modals.addEmail.confirmPasswordPlaceholder" style="width: 100%;">
                    </div>
                    <div id="addEmailAlert" class="alert" style="margin-top: 12px; display: none;"></div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-outline" id="cancelAddEmail" data-i18n="settings.modals.addEmail.cancelButton">Cancel</button>
                    <button class="btn btn-success" id="addEmailPasswordBtn" data-i18n="settings.modals.addEmail.addButton">Add Email & Password</button>
                </div>
            </div>
        </div>

        <!-- Change Email Modal (for users with existing email) -->
        <div id="changeEmailModal" class="modal-overlay">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 data-i18n="settings.modals.changeEmail.title">Change Email Address</h3>
                    <button class="modal-close" id="changeEmailModalClose">&times;</button>
                </div>
                <div class="modal-body">
                    <p style="margin-bottom: 16px; color: #666; font-size: 14px;">
                        For security, enter your current password to change your email address.
                    </p>
                    <div class="form-group" style="margin-bottom: 16px;">
                        <label class="form-label" data-i18n="settings.modals.changeEmail.currentPasswordLabel">Current Password</label>
                        <input type="password" id="currentPasswordEmail" class="form-input" data-i18n="[placeholder]settings.modals.changeEmail.currentPasswordPlaceholder" style="width: 100%;">
                    </div>
                    <div class="form-group" style="margin-bottom: 16px;">
                        <label class="form-label" data-i18n="settings.modals.changeEmail.newEmailLabel">New Email Address</label>
                        <input type="email" id="newEmail" class="form-input" data-i18n="[placeholder]settings.modals.changeEmail.newEmailPlaceholder" style="width: 100%;">
                    </div>
                    <div id="changeEmailAlert" class="alert" style="margin-top: 12px; display: none;"></div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-outline" id="cancelChangeEmail" data-i18n="settings.modals.changeEmail.cancelButton">Cancel</button>
                    <button class="btn btn-success" id="changeEmailBtn2" data-i18n="settings.modals.changeEmail.changeButton">Change Email</button>
                </div>
            </div>
        </div>

        <!-- Address Change Modal (Matching CreateListing.html) -->
        <div id="addressChangeModal" class="modal-overlay">
            <div class="modal">
                <div class="modal-header">
                    <h2 class="modal-title" data-i18n="settings.modals.addressChange.title">üìç Select Address</h2>
                    <button class="modal-close" id="addressModalClose">&times;</button>
                </div>
                <input type="text" id="addressSearch" class="location-search" data-i18n="[placeholder]settings.modals.addressChange.searchPlaceholder">
                <div id="addressMapContainer" class="map-container"></div>
                
                <!-- Address Preview -->
                <div id="addressPreview" style="background: #f8f9fa; border: 2px solid #e0e0e0; border-radius: 12px; padding: 16px; margin-bottom: 20px;">
                    <div style="display: flex; align-items: start; gap: 12px;">
                        <span style="font-size: 24px;">üìç</span>
                        <div style="flex: 1;">
                            <div style="font-weight: 600; font-size: 16px; color: #333; margin-bottom: 4px;" id="previewAddressName" data-i18n="settings.modals.addressChange.selectedLocation">Select an address</div>
                            <div style="font-size: 14px; color: #666; line-height: 1.5;" id="previewAddressDetails">Click on the map or search to select your address</div>
                        </div>
                    </div>
                </div>
                
                <div class="modal-buttons">
                    <button class="btn-secondary" id="cancelAddressChange" data-i18n="settings.modals.addressChange.cancelButton">Cancel</button>
                    <button class="btn-primary" id="confirmAddressChange" data-i18n="settings.modals.addressChange.confirmButton">Save Address</button>
                </div>
            </div>
        </div>

        <style>
            /* Google Maps Modal Styles (Matching CreateListing.html) */
            .modal-overlay {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.5);
                display: none;
                align-items: center;
                justify-content: center;
                z-index: 1000;
                -webkit-backdrop-filter: blur(5px);
                backdrop-filter: blur(5px);
            }

            .modal-overlay.show {
                display: flex;
            }

            .modal-content {
                background: white;
                border-radius: 16px;
                padding: 24px;
                max-width: 500px;
                width: 90%;
                position: relative;
                box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            }

            .modal {
                background: white;
                border-radius: 20px;
                padding: 30px;
                max-width: 800px;
                width: 90%;
                max-height: 80vh;
                overflow-y: auto;
                position: relative;
            }

            .modal-header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 20px;
            }

            .modal-title {
                margin: 0;
                color: #333;
                font-size: 20px;
                font-weight: 600;
            }

            .modal-close {
                background: none;
                border: none;
                font-size: 24px;
                cursor: pointer;
                color: #666;
                transition: color 0.3s;
            }

            .modal-close:hover {
                color: #333;
            }

            .modal-body {
                margin: 16px 0;
            }

            .modal-footer {
                display: flex;
                gap: 12px;
                justify-content: flex-end;
                margin-top: 24px;
            }

            .map-container {
                width: 100%;
                height: 400px;
                border-radius: 12px;
                overflow: hidden;
                margin-bottom: 20px;
                border: 2px solid #e0e0e0;
            }

            .location-search {
                width: 100%;
                padding: 12px 16px;
                border: 2px solid #e0e0e0;
                border-radius: 12px;
                font-size: 14px;
                font-family: 'Poppins', Arial, sans-serif;
                margin-bottom: 15px;
                outline: none;
                transition: border-color 0.3s;
            }

            .location-search:focus {
                border-color: #4CAF50;
            }

            .modal-buttons {
                display: flex;
                gap: 12px;
                justify-content: flex-end;
            }

            .btn-secondary {
                background: #f5f5f5;
                color: #333;
                border: none;
                padding: 12px 24px;
                border-radius: 8px;
                font-size: 14px;
                font-weight: 500;
                cursor: pointer;
                transition: background 0.3s;
            }

            .btn-secondary:hover {
                background: #e0e0e0;
            }

            .btn-primary {
                background: #4CAF50;
                color: white;
                border: none;
                padding: 12px 24px;
                border-radius: 8px;
                font-size: 14px;
                font-weight: 500;
                cursor: pointer;
                transition: background 0.3s;
            }

            .btn-primary:hover {
                background: #45a049;
            }

            /* Modal responsive styles */
            @media (max-width: 768px) {
                .modal {
                    width: 95%;
                    padding: 20px;
                    margin: 20px;
                }

                .map-container {
                    height: 300px;
                }

                .modal-buttons {
                    flex-direction: column;
                }

                .btn-secondary, .btn-primary {
                    width: 100%;
                    margin-bottom: 8px;
                }
            }
        </style>

        <!-- Google Maps API Script -->
        <script async defer
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDxldiepJaqTaCW9kxCr-3cYgSlVD0fQYg&libraries=places,marker&loading=async&callback=initMap">
        </script>

        <script src="/js/i18n.js"></script>
        <script type="module" src="/js/dashboard-auth-guard.js"></script>
        <script type="module" src="/js/profile-settings.js"></script>
        <script type="module" src="/js/shared-user-manager.js"></script>
        <script>
            // Initialize i18next when DOM is ready
            document.addEventListener('DOMContentLoaded', async () => {
                await window.i18nManager.initialize();
            });
        </script>
    </body>
    </html>